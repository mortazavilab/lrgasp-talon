configfile: "configs/config.yaml"


species = config['species']
platforms = config['platforms']
species = ['human']
platforms = ['PacBio']
# tools = config['tools']
tools = ['stringtie', 'talon']


def fasta_specie(wildcards):
    return config['lrgasp']['reference'][wildcards.specie]['fasta']


def gtf_specie(wildcards):
    return config['lrgasp']['reference'][wildcards.specie]['gtf']


def fastq_specie_platform(wildcards):
    return config['lrgasp']['simulation'][wildcards.platform].format(specie=wildcards.specie)


include: "./rules/download.smk"
include: "./rules/align.smk"
include: "./rules/stringtie.smk"
# TODO: run TALON
include: "./rules/talon.smk"
include: "./rules/benchmark.smk"


rule all:
    input:
        # expand(config['talon']['gtf'], specie=species, platform=platforms)
        # config['lrgasp']['dir'] + '/../lrgasp.done',
        # config['utilities']['polyA_list'],
        expand(config['benchmark']['result_dir'],
               specie=species, platform=platforms, tool=tools)
